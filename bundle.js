!function(t){function e(o){if(s[o])return s[o].exports;var i=s[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var s={};e.m=t,e.c=s,e.i=function(t){return t},e.d=function(t,s,o){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}([function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t}();o.GAME_NAME="flappy_game",o.width=800,o.height=600,o.EXTREME_SCORE=35,o.HARD_SCORE=20,o.MEDIUM_SCORE=10,e.Constantes=o},function(t,e,s){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])};return function(e,s){function o(){this.constructor=e}t(e,s),e.prototype=null===s?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=s(3),r=s(0),a=s(2),n=function(t){function e(){var e=t.call(this)||this;return e.scoreService=new i.ScoreService(r.Constantes.GAME_NAME),e}return o(e,t),e.prototype.create=function(){this.currentScore=0,this.gameStarted=!1,this.game.stage.setBackgroundColor("#ffffff");var t=this.game.add.sprite(0,0,"background");t.scale.setTo(.6),this.backgroundTween=this.game.add.tween(t).to({x:-2800},1e4,Phaser.Easing.Linear.None,!0,0,-1),this.game.physics.startSystem(Phaser.Physics.ARCADE),this.rocket=this.game.add.sprite(100,270,"rocket"),this.rocket.scale.setTo(.25,.25),this.rocket.anchor.setTo(-.1,.5),this.game.physics.arcade.enable(this.rocket),this.jumpSound=this.game.add.audio("jump"),this.pipes=this.game.add.group(),this.fires=this.game.add.group(),this.labelClickToStart=this.game.add.bitmapText(270,240,"myfont","Toucher pour commencer",60),this.labelClickToStart.smoothed=!0,this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR).onDown.add(this.jump,this),this.game.input.onDown.add(this.jump,this)},e.prototype.update=function(){var t=this;this.updateRocketFire(),this.gameStarted&&(this.manageTimer(),this.pipes.forEach(function(e){t.game.physics.arcade.overlap(t.rocket,e,t.hitPipe,null,t)||(e.position.x<0?e.destroy():e.position.x<100.5&&e.position.x>99.5&&!e.data.scoreDone&&(t.currentScore++,t.updateScore(),e.data.scoreDone=!0))},this),this.rocket.y<=0?this.rocket.y=0:this.rocket.y>this.game.height&&this.restartGame(),this.rocket.angle<10&&(this.rocket.angle+=1))},e.prototype.jump=function(){if(this.gameStarted){if(0==this.rocket.alive)return;this.rocket.body.velocity.y=-700,this.jumpSound.play(),this.game.add.tween(this.rocket).to({angle:-10},200).start()}else this.gameStarted=!0,this.rocket.body.gravity.y=2500,this.updateScore(),this.labelClickToStart.destroy()},e.prototype.manageTimer=function(){var t;if(t=this.currentScore<r.Constantes.MEDIUM_SCORE?2500:this.currentScore<r.Constantes.HARD_SCORE?2200:1900,null==this.timer)return void(this.timer=this.game.time.events.loop(t,this.addRowOfPipes,this));this.timer.delay!==t&&(this.game.time.events.remove(this.timer),this.timer=this.game.time.events.loop(t,this.addRowOfPipes,this))},e.prototype.restartGame=function(){this.scoreService.setHightscore(this.currentScore),a.LooseState.currentScore=this.currentScore,this.game.state.start("loose")},e.prototype.updateRocketFire=function(){if(0==this.fires.length){var t=this.game.add.sprite(0,0,"fire"),e=this.game.add.sprite(10,0,"fire2");t.alpha=0,t.scale.setTo(.25,.25),e.alpha=0,e.scale.setTo(.25,.25),this.game.add.tween(t).to({alpha:1},800,"Linear",!0,0,-1,!0),this.game.add.tween(e).to({alpha:1},800,"Linear",!0,800,-1,!0),this.fires.add(t),this.fires.add(e)}this.fires.x=this.rocket.x-20,this.fires.y=this.rocket.y-5,this.fires.angle=this.rocket.angle},e.prototype.addOnePipe=function(t,e,s){void 0===s&&(s=!1);var o;s?(o=this.game.add.sprite(this.game.width+105,t+e,"pipe"),o.scale.setTo(-.435,-.435)):(o=this.game.add.sprite(this.game.width,t+e,"pipe"),o.scale.setTo(.435,.435)),o.data.scoreDone=!1,this.pipes.add(o),this.game.physics.arcade.enable(o),o.body.velocity.x=-400},e.prototype.addRowOfPipes=function(){var t;t=this.currentScore<r.Constantes.MEDIUM_SCORE?200:this.currentScore<r.Constantes.HARD_SCORE?170:this.currentScore<r.Constantes.EXTREME_SCORE?150:130;var e=Math.floor(520*Math.random())+t;e>520?e=520:e<t&&(e=t);var s=e,o=s-(520+t);this.addOnePipe(0,o),this.addOnePipe(this.game.height,s,!0)},e.prototype.updateScore=function(){null==this.labelHightScore&&(this.labelHightScore=this.game.add.bitmapText(20,20,"myfont","Hightscore : "+this.scoreService.getHightscore(),40),this.labelHightScore.smoothed=!0);var t="Actuel : "+this.currentScore.toString();null==this.labelCurrentScore?(this.labelCurrentScore=this.game.add.bitmapText(20,60,"myfont",t,40),this.labelCurrentScore.smoothed=!0):this.labelCurrentScore.text=t},e.prototype.hitPipe=function(){0!=this.rocket.alive&&(this.backgroundTween.pause(),this.rocket.alive=!1,this.game.time.events.remove(this.timer),this.rocket.body.gravity.y=4e3,this.pipes.forEach(function(t){t.body.velocity.x=0},this))},e}(Phaser.State);e.LevelState=n},function(t,e,s){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])};return function(e,s){function o(){this.constructor=e}t(e,s),e.prototype=null===s?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=s(0),r=s(1),a=s(3),n=function(t){function e(){var e=t.call(this)||this;return e.scoreService=new a.ScoreService(i.Constantes.GAME_NAME),e}return o(e,t),e.prototype.create=function(){this.game.stage.setBackgroundColor("#ffffff"),this.clickSound=this.game.add.audio("click"),this.game.add.sprite(70,30,"ending").scale.setTo(.55),this.game.add.button(70,480,"rejouer",this.replay,this,0,1,0).scale.setTo(.5),this.game.add.button(490,480,"quitter",this.quit,this,0,1,0).scale.setTo(.5),this.game.add.bitmapText(300,20,"myfont","Bravo !",120),this.scoreService.getHightscore()===e.currentScore?(this.game.add.bitmapText(250,120,"myfont","Tu as obtenu",70),this.game.add.bitmapText(230,170,"myfont","le meilleur score",70)):this.game.add.bitmapText(250,150,"myfont","Tu as obtenu",70),this.game.add.bitmapText(280,210,"myfont",e.currentScore.toString()+" pts",120);var t=this.game.add.sprite(250,320,"etoile");t.scale.setTo(.5),t.frame=1,e.currentScore>=i.Constantes.MEDIUM_SCORE&&(t.frame=0);var s=this.game.add.sprite(350,320,"etoile");s.scale.setTo(.5),s.frame=1,e.currentScore>=i.Constantes.HARD_SCORE&&(s.frame=0);var o=this.game.add.sprite(450,320,"etoile");o.scale.setTo(.5),o.frame=1,e.currentScore>=i.Constantes.EXTREME_SCORE&&(o.frame=0)},e.prototype.replay=function(){this.clickSound.play(),this.game.state.remove("level"),this.game.state.add("level",r.LevelState),this.game.state.start("level",!0,!1)},e.prototype.quit=function(){this.clickSound.play(),this.game.state.remove("level"),this.game.state.add("level",r.LevelState),this.game.state.start("menu")},e}(Phaser.State);n.currentScore=0,e.LooseState=n},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.game=t}return t.prototype.getHightscore=function(){var t=localStorage.getItem(this.game);return null!=t?parseInt(t):0},t.prototype.setHightscore=function(t){t>this.getHightscore()&&localStorage.setItem(this.game,t.toString())},t}();e.ScoreService=o},function(t,e,s){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])};return function(e,s){function o(){this.constructor=e}t(e,s),e.prototype=null===s?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=s(0),r=s(6),a=s(1),n=s(7),c=s(2),h=function(t){function e(){var e=t.call(this,i.Constantes.width,600,Phaser.AUTO,"content",null)||this;return e.state.add("boot",r.BootState),e.state.add("menu",n.MenuState),e.state.add("level",a.LevelState),e.state.add("loose",c.LooseState),e.state.start("boot"),e}return o(e,t),e}(Phaser.Game);e.FlappyGame=h},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(4);window.onload=function(){new o.FlappyGame}},function(t,e,s){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])};return function(e,s){function o(){this.constructor=e}t(e,s),e.prototype=null===s?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.preload=function(){this.load.spritesheet("etoile","/assets/etoile-sheet.png",138,159,2,0,10),this.load.spritesheet("jouer","/assets/jouer-sheet.png",403,191,2,0,10),this.load.spritesheet("quitter","/assets/quitter-sheet.png",403,191,2,0,10),this.load.spritesheet("rejouer","/assets/rejouer-sheet.png",403,191,2,0,10),this.load.image("fire","/assets/fire.png"),this.load.image("fire2","/assets/fire2.png"),this.load.image("rocket","/assets/rocket.png"),this.load.image("pipe","/assets/tube.png"),this.load.image("background","/assets/fond.png"),this.load.image("titre","/assets/titre.png"),this.load.image("fond-launcher","/assets/fond-launcher.png"),this.load.image("fusee-accueil","/assets/fusee-accueil.png"),this.load.image("fumee-accueil","/assets/fumee-accueil.png"),this.load.image("hand","/assets/hand.png"),this.load.image("ending","/assets/ending-screen.png"),this.load.audio("jump","/assets/jump.wav"),this.load.audio("click","/assets/clic.ogg"),this.game.load.bitmapFont("myfont","/fonts/hand/font.png","/fonts/hand/font.fnt")},e.prototype.create=function(){this.game.state.start("menu")},e}(Phaser.State);e.BootState=i},function(t,e,s){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])};return function(e,s){function o(){this.constructor=e}t(e,s),e.prototype=null===s?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.create=function(){this.game.add.sprite(0,0,"fond-launcher").scale.setTo(.5,.6),this.clickSound=this.game.add.audio("click"),this.game.add.sprite(20,40,"titre").scale.setTo(.5),this.game.add.sprite(380,420,"fusee-accueil").scale.setTo(.5),this.game.add.sprite(630,470,"fumee-accueil").scale.setTo(.5);var t=this.game.add.sprite(470,340,"hand");t.scale.setTo(.25),this.game.add.tween(t).to({y:310},1e3,Phaser.Easing.Linear.None,!0,100,-1,!0),this.game.add.button(130,400,"jouer",this.play,this,0,1,0).scale.setTo(.5)},e.prototype.play=function(){this.clickSound.play(),this.game.state.start("level")},e}(Phaser.State);e.MenuState=i}]);